document.addEventListener("alpine:init",()=>{let n=["#008FFB","#00E396","#FEB019","#FF4560","#775DD0","#546E7A"];Alpine.data("sexoChartComponent",()=>({chart:null,init(){let s={chart:{type:"donut",height:350,toolbar:{show:!0},events:{dataPointMouseEnter:(e,o,t)=>{let a=t.w.config.labels[t.dataPointIndex],r=t.w.config.series[t.dataPointIndex];this.chart.updateOptions({plotOptions:{pie:{donut:{labels:{total:{show:!0,label:a,formatter:()=>r}}}}}})},dataPointMouseLeave:()=>{this.chart.updateOptions({plotOptions:{pie:{donut:{labels:{total:{show:!0,label:"Total",formatter:(e)=>e.globals.seriesTotals.reduce((o,t)=>o+t,0)}}}}}})}}},colors:n,series:[],labels:[],plotOptions:{pie:{donut:{size:"65%",labels:{show:!0,total:{show:!0,label:"Total",formatter:(e)=>{if(e.globals.seriesTotals.length===0)return 0;return e.globals.seriesTotals.reduce((o,t)=>o+t,0)}}}}}},dataLabels:{enabled:!0,formatter:function(e){return e.toFixed(1)+"%"},dropShadow:{enabled:!1}},legend:{position:"bottom"},noData:{text:"Seleccione un diagnóstico y rango de fechas."}};this.chart=new ApexCharts(this.$refs.chart,s),this.chart.render()},fetchData(s,e,o){if(!s||!e||!o)return;let t=new URLSearchParams({IdDiagnostico:s,FechaInicio:e,FechaFin:o});fetch(`/api/sexo-por-diagnostico?${t}`).then((a)=>a.json()).then((a)=>{this.chart.updateOptions({series:a.map((r)=>r.cantidadAtenciones),labels:a.map((r)=>r.sexo)})})}})),Alpine.data("edadesChartComponent",()=>({chart:null,init(){let s={chart:{type:"bar",height:350,toolbar:{show:!0}},colors:[n[0]],series:[{name:"Atenciones",data:[]}],xaxis:{categories:[]},plotOptions:{bar:{horizontal:!1,dataLabels:{position:"top"},borderRadiusApplication:"end",borderRadius:5}},dataLabels:{enabled:!0,offsetY:-20,style:{fontSize:"12px",colors:["#304758"]}},grid:{show:!0,borderColor:"#e0e0e0",strokeDashArray:2},noData:{text:"Seleccione un diagnóstico y rango de fechas."}};this.chart=new ApexCharts(this.$refs.chart,s),this.chart.render()},fetchData(s,e,o){if(!s||!e||!o)return;let t=new URLSearchParams({IdDiagnostico:s,FechaInicio:e,FechaFin:o});fetch(`/api/edades-por-diagnostico?${t}`).then((a)=>a.json()).then((a)=>{this.chart.updateOptions({series:[{data:a.map((r)=>r.cantidadAtenciones)}],xaxis:{categories:a.map((r)=>r.grupoEdad)}})})}}))});
